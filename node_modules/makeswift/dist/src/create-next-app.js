"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createNextApp = void 0;
const cross_spawn_1 = __importDefault(require("cross-spawn"));
const MakeswiftError_1 = __importDefault(require("./errors/MakeswiftError"));
const coerce_example_to_URL_1 = require("./utils/coerce-example-to-URL");
function createNextApp({ dir, example, useNpm, usePnpm, }) {
    const url = (0, coerce_example_to_URL_1.coerceExampleToUrl)(example);
    const npxArgs = ['--yes', 'create-next-app', '--example', url, dir];
    if (useNpm) {
        npxArgs.push('--use-npm');
    }
    if (usePnpm) {
        npxArgs.push('--use-pnpm');
    }
    const output = cross_spawn_1.default.sync('npx', npxArgs, {
        stdio: 'inherit',
    });
    if (output.status === 1) {
        throw new MakeswiftError_1.default('Unable to create a Next.js app. There should be output above.');
    }
}
exports.createNextApp = createNextApp;
